{
  "consumer": {
    "name": "v3-message-consumer"
  },
  "provider": {
    "name": "v3-message-provider"
  },
  "messages": [
    {
      "description": "a user created event message",
      "providerState": "a user signup occurred",
      "contents": {
        "eventType": "user.created",
        "userId": "12345",
        "username": "john.doe",
        "email": "john.doe@example.com",
        "timestamp": "2024-01-15T10:30:00Z"
      },
      "metaData": {
        "contentType": "application/json",
        "kafka_topic": "user-events"
      },
      "matchingRules": {
        "body": {
          "$.userId": {
            "matchers": [
              {
                "match": "type"
              }
            ]
          },
          "$.username": {
            "matchers": [
              {
                "match": "type"
              }
            ]
          },
          "$.email": {
            "matchers": [
              {
                "match": "regex",
                "regex": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
              }
            ]
          },
          "$.timestamp": {
            "matchers": [
              {
                "match": "datetime",
                "format": "yyyy-MM-dd'T'HH:mm:ssX"
              }
            ]
          }
        }
      }
    },
    {
      "description": "an order placed event with multiple provider states",
      "providerState": "product exists and customer has credit",
      "contents": {
        "eventType": "order.placed",
        "orderId": 7890,
        "customerId": "CUST-999",
        "items": [
          {
            "productId": "PROD-001",
            "quantity": 2,
            "price": 29.99
          }
        ],
        "totalAmount": 59.98
      },
      "metaData": {
        "contentType": "application/json",
        "queue": "orders"
      },
      "matchingRules": {
        "body": {
          "$.orderId": {
            "matchers": [
              {
                "match": "integer"
              }
            ]
          },
          "$.items": {
            "matchers": [
              {
                "match": "type",
                "min": 1
              }
            ]
          },
          "$.items[*].quantity": {
            "matchers": [
              {
                "match": "integer"
              }
            ]
          },
          "$.items[*].price": {
            "matchers": [
              {
                "match": "decimal"
              }
            ]
          },
          "$.totalAmount": {
            "matchers": [
              {
                "match": "decimal"
              }
            ]
          }
        }
      }
    },
    {
      "description": "a payment processed notification",
      "providerState": "payment gateway is available",
      "contents": {
        "eventType": "payment.processed",
        "paymentId": "PAY-ABC-123",
        "status": "completed",
        "amount": 99.99,
        "currency": "USD",
        "processedAt": "2024-01-15T14:22:33Z"
      },
      "metaData": {
        "contentType": "application/json"
      },
      "matchingRules": {
        "body": {
          "$.paymentId": {
            "matchers": [
              {
                "match": "regex",
                "regex": "^PAY-[A-Z]{3}-\\d{3}$"
              }
            ]
          },
          "$.status": {
            "matchers": [
              {
                "match": "include",
                "value": "completed"
              }
            ]
          },
          "$.amount": {
            "matchers": [
              {
                "match": "decimal"
              }
            ]
          }
        }
      }
    }
  ],
  "metadata": {
    "pactSpecification": {
      "version": "3.0.0"
    }
  }
}
